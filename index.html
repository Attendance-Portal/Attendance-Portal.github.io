<html>
<head>
     <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <title>AI Based Attendance System</title>
     <base target="_top">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
     <meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <!-- Required meta tags -->

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <title>AI Based Attendance System</title>

     <base target="_top">

  <script>
  function gotolink(){
	window.location.replace("https://attendance-portal.github.io/");}
  </script>
  <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<!------ Include the above in your HEAD tag ---------->
<script src="http://getbootstrap.com/dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" />
        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js" integrity="sha256-c3RzsUWg+y2XljunEQS0LqWdQ04X1D3j22fd/8JCAKw=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js" integrity="sha256-FPJJt8nA+xL4RU6/gsriA8p8xAeLGatoyTjldvQKGdE=" crossorigin="anonymous"></script>

       <style type='text/css'>
    * {
        padding: 0;
        margin: 0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }


    body {
        background-image: url('https://i.pinimg.com/originals/7b/b8/a1/7bb8a1c2902ef64ebd058249a369de5e.jpg');
        background-repeat: no-repeat;
        position: relative;
        background-size: cover;
        font-family: sans-serif;
        margin-top: 40px;
        height: 100vh;
        padding: 0;
        margin: 0;
    }

    table {
        border: 1px;
        font-family: arial, sans-serif;
        border-collapse: collapse;
        width: 86%;
        margin: auto;
    }

    td,
    th {
        border: 1px solid white !important;
        /* padding: 5px; */
    }

    tr:nth-child(even) {
        background-color: #dddddd;
    }
    /* div {
display: flex;
justify-content: center;
} */

</style>
<style>
#overlay, .overlay {
            position: absolute;
            top: 190;
            left: 365;
            }
 </style>
<script>
    function LatestPost()
{
  html2canvas(document.querySelector("#LatestPost"), {
      onrendered: function(canvas)
      {
        var img = canvas.toDataURL();
        $("#result-image").attr('src', img).show();
        canvas.toBlob(function(blob) {
          saveAs(blob, "student.png");
        });
      },
      allowTaint: true,
      imageTimeout: 0,
      useCORS: true
  });
  return false;
}
     function screenshot(){
         html2canvas(document.getElementById('scr')).then(function(canvas) {
            document.body.appendChild(canvas);
         });
      }


function download() {
var canvas = document.getElementById( 'reflay' );
var image = canvas.toDataURL();

    // create temporary link
    var tmpLink = document.createElement( 'a' );
    tmpLink.download = 'image.png'; // set the name of the download file
    tmpLink.href = image;

    // temporarily add link to body and initiate the download
    document.body.appendChild( tmpLink );
    tmpLink.click();
    document.body.removeChild( tmpLink );

}</script>
 </head>
 <header>
  <div class='mt-3 text-center'>
    <h1 style="width: auto;margin: auto;color: white;padding: 11px;font-size: 35px;">On-click Group Attendance Portal</h1>
     <h3 style="width: auto;margin: auto;color: white;padding: 11px;font-size: 28px;">IIT (BHU) Varanasi</h3></div>
  <nav class="navbar-expand-sm bg-primary navbar-light bg-light">
  <!-- <nav class="navbar navbar-expand-lg navbar-light bg-light"> -->
  <!-- <nav class="navbar navbar-default navbar-expand-lg"> -->
  <div class="container-fluid">
    <!-- <div class="navbar-header">
       <!-- <?var url = getScriptUrl();?><a class="navbar-brand" href="<?=url?>?page=home">Home</a> -->
    <!-- </div>  -->
    <ul class="nav navbar-nav">
      <li class="active"><a href="">Home</a></li>
      <!-- <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Registration </a> -->
        <!-- <ul class="dropdown-menu"> -->
          <li> <a href="">Faculty registration</a></li>
          <li><a href="">Student registration</a></li>
        <!-- </ul> -->
      <!-- </li> -->
      <!-- <li class="dropdown"> <?var url = getScriptUrl();?><a class="dropdown-toggle"  data-toggle="dropdown" href="#">Faculty Attendance </a>
        <ul class="dropdown-menu"> -->
          <li> <a href="">Upload attendance</a></li>
          <li style="color:#0F52BA" onclick="gotolink()"><a>View attendance</a></li>
          <!-- <li><?var url = getScriptUrl();?><a href="<?=url?>?page=updated">View attendance</a></li> -->
        <!-- </ul> -->
      <!-- </li> -->
      <!-- <li class="dropdown"> <?var url = getScriptUrl();?><a class="dropdown-toggle"  data-toggle="dropdown" href="#">Student Attendance </a> -->
        <!-- <ul class="dropdown-menu"> -->
          <li> <a href="">Verify attendance</a></li>
          <!-- <li><?var url = getScriptUrl();?><a href="<?=url?>?page=updated">View attendance</a></li> -->
        <!-- </ul> -->
      <!-- </li> -->
<!--      <li><a href="">Contact</a></li>-->
    </ul>
  </div>
</nav></header>
<br>

 <body>
 <div class='mt-3 text-center'>
 <div id="LatestPost">
        <img src="images/20221121_104311.jpg" onclick="popup()" id="originalImg" width="800" height="800" />
        <canvas id="reflay" width="800" height="800" class="overlay" onclick="popup()"></canvas></div>

 <br>

	            <button type="button" onclick="LatestPost();" class="btn btn-default">Download</button>
<br>
 <p style="color:red"> In case, the face remains undetected:<br>
     1. Draw box on your face using by clicking on your face and enter the serial number and roll number.<br>
     2. Download the image using download button.<br>
     3. upload the image at this <a href="https://drive.google.com/drive/folders/1iehWSC3jFtNofH375XHtCGnO0HsoBNKv">link</a>.</p></div>
<!--	 <a id="lnkDownload" href="#">Save image</a>-->

	 <script src="https://drive.google.com/file/d/1R05zPeilwduE1jcd8Uy1oel4U1ycma5X/view?usp=share_link"></script>
        <script src="https://drive.google.com/file/d/1u378jxX2fFqNrWnEnF1SS7QITheFLmlD/view?usp=share_link"></script>
         <script src="https://drive.google.com/file/d/1Ku2504WNYSKm8r5irIW3XgYm6xMlXc9A/view?usp=share_link"></script>
<!--         <script src="js/face2.js"></script>
 -->
<!--<script>-->
<!--var imageSaver = document.getElementById('lnkDownload');-->
<!--imageSaver.addEventListener('click', saveImage, false);-->

<!--function saveImage(e,f) {-->
<!--  this.href = canvas.toDataURL({-->
<!--    format: 'png',-->
<!--    quality: 0.8-->
<!--  });-->
<!--  this.download = 'canvas.png'-->
<!--}-->
<!--</script>-->

<script type="text/javascript">
        var canvas = document.getElementById('reflay');
var ctx = canvas.getContext('2d');
var rect = {};
var drag = false;
var imageObj = null;

function init() {
    imageObj = new Image();
    imageObj.onload = function () { ctx.drawImage(imageObj, 0, 0); };
    var src = document.getElementById("originalImg").getAttribute("src");
    canvas.src = src;
<!--    canvas.src='https://www.shutterstock.com/image-photo/diversity-people-group-team-union-600w-379530769.jpg';-->
    canvas.addEventListener('mousedown', mouseDown, false);
    canvas.addEventListener('mouseup', mouseUp, false);
    canvas.addEventListener('mousemove', mouseMove, false);
}

function mouseDown(e) {
    rect.startX = e.pageX - this.offsetLeft;
    rect.startY = e.pageY - this.offsetTop;
    drag = true;
}

function mouseUp() { drag = false; }

function mouseMove(e) {
    if (drag) {
        ctx.save();
        ctx.lineWidth = 5;
        ctx.clearRect(0, 0, 800, 800);
        ctx.drawImage(imageObj, 0, 0);
        rect.w = (e.pageX - this.offsetLeft) - rect.startX;
        rect.h = (e.pageY - this.offsetTop) - rect.startY;
        ctx.strokeStyle = 'orange';
        ctx.strokeRect(rect.startX, rect.startY, rect.w, rect.h);
        ctx.restore();
    }
}
//
init();

    </script>
        <div class="container">
	<div class="row">
        <div class="col-md-12">
        <h4 style="color:white">Attendance for Today</h4>
        <div class="table-responsive">

<table id="myTable" class="table table-bordred table-striped">
     <thead>
    <tr style="color:white">
      <th>Serial no.</th>
      <th>Student Roll Number</th>
      <th><p data-placement="top" data-toggle="tooltip" title="Edit"><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal" data-target="#edit" ><span class="glyphicon glyphicon-pencil"></span></button></p></th>
      <th><p data-placement="top" data-toggle="tooltip" title="Delete"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal" data-target="#delete" ><span class="glyphicon glyphicon-trash"></span></button></p>
    </th>
    </tr>
  </thead>
  <tbody id="testBody">
     <td><p data-placement="top" data-toggle="tooltip" title="serialno" >
       <!-- <button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal" data-target="#edit" > id="sno"-->
         <!-- <span class="glyphicon glyphicon-pencil"></span></button> -->
         </p></td>
    <td><p data-placement="top" data-toggle="tooltip" title="rollNo" >
      <!-- <button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal" data-target="#delete" >id="rno" -->
        <!-- <span class="glyphicon glyphicon-trash"></span></button> -->
        </p></td>
    <td><p data-placement="top" data-toggle="tooltip"  onclick="edit_row()" title="edit">
      <!-- <button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal" data-target="#delete" > id="edit"-->
        <!-- <span class="glyphicon glyphicon-trash"></span></button> -->
        </p></td>
    <td><p data-placement="top" data-toggle="tooltip" title="ok">
      <!-- <button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal" data-target="#delete" > -->
        <!-- <span class="glyphicon glyphicon-trash"></span></button> -->
        </p></td></tbody>

</table>
  <script>
    var popup = function() {
    var my_text=prompt('Enter serial number');
    var my_text1=prompt('Enter roll number');
    if(my_text && my_text1) alert(my_text + my_text1);
    const table = document.getElementById("testBody");
    // let save = document.createElement("button");
    // let edit = document.createElement("button");
    let row = table.insertRow();
    let date = row.insertCell(0);
    date.innerHTML = "<td><input type='text' id='sno' value='"+date+"' onclick=""></td>";
    let name = row.insertCell(1);
    name.innerHTML = "<td><input type='text' id='rno' value='"+name+"'onclick=""></td>";
    save = row.insertCell(2);
    save.innerHTML = "<td><input type='button' id="edit" value='Edit' onclick=""></td>";
    edit = row.insertCell(3);
    edit.innerHTML = "<td><input type='button' id="" value='OK' onclick=""></td>";
    // document.body.appendChild(save);
    // document.body.appendChild(edit);
    }


    function edit_row()
{
 document.getElementById("edit").style.display="none";
 document.getElementById("save_button").style.display="block";

 var sno=document.getElementById("sno");
 var rno=document.getElementById("rno");

 var sno=sno.innerHTML;
 var rno=rno.innerHTML;

 name.innerHTML="<input type='text' id='sno' value='"+sno+"'>";
 country.innerHTML="<input type='text' id='rno' value='"+rno+"'>";
}
  </script>
     </div>
            <button style="align:centre" class='mt-3 text-center' type="button" class="btn btn-default">Next</button>
</div>
    </div>
 </body></html>
